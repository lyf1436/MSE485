LAMMPS (23 Jun 2022)
# Compute elastic constant tensor for a crystal
#
# Written by Aidan Thompson (Sandia, athomps@sandia.gov)
#
#  This script uses the following three include files.
#
#   init.mod      (must be modified for different crystal structures)
# 	       	  Define units, deformation parameters and initial
#		  configuration of the atoms and simulation cell.
#
#
#   potential.mod    (must be modified for different pair styles)
# 		     Define pair style and other attributes
#		     not stored in restart file
#
#
#   displace.mod    (displace.mod should not need to be modified)
# 		    Perform positive and negative box displacements
# 		    in direction ${dir} and size ${up}.
# 		    It uses the resultant changes
#		    in stress to compute one
# 		    row of the elastic stiffness tensor
#
#		    Inputs variables:
#		    	   dir = the Voigt deformation component
#		    		    (1,2,3,4,5,6)
#		    Global constants:
#       	    	   up = the deformation magnitude (strain units)
#       		   cfac = conversion from LAMMPS pressure units to
#               	   output units for elastic constants
#
#
#  To run this on a different system, it should only be necessary to
#  modify the files init.mod and potential.mod. In order to calculate
#  the elastic constants correctly, care must be taken to specify
#  the correct units in init.mod (units, cfac and cunits). It is also
#  important to verify that the minimization of energy w.r.t atom
#  positions in the deformed cell is fully converged.
#  One indication of this is that the elastic constants are insensitive
#  to the choice of the variable ${up} in init.mod. Another is to check
#  the final max and two-norm forces reported in the log file. If you know
#  that minimization is not required, you can set maxiter = 0.0 in
#  init.mod.
#

include init.mod
# NOTE: This script can be modified for different atomic structures,
# units, etc. See in.elastic for more info.
#

# Define the finite deformation size. Try several values of this
# variable to verify that results do not depend on it.
variable up equal 1.0e-6

# Define the amount of random jiggle for atoms
# This prevents atoms from staying on saddle points
variable atomjiggle equal 1.0e-5

# Uncomment one of these blocks, depending on what units
# you are using in LAMMPS and for output

# metal units, elastic constants in eV/A^3
#units		metal
#variable cfac equal 6.2414e-7
#variable cunits string eV/A^3

# metal units, elastic constants in GPa
units		metal
variable cfac equal 1.0e-4
variable cunits string GPa

# real units, elastic constants in GPa
#units		real
#variable cfac equal 1.01325e-4
#variable cunits string GPa

# Define minimization parameters
variable etol equal 0.0
variable ftol equal 1.0e-10
variable maxiter equal 100
variable maxeval equal 1000
variable dmax equal 1.0e-2

# generate the box and atom positions using a diamond lattice
# variable a equal 5.43

boundary	p p p

lattice         fcc 4.242
Lattice spacing in x,y,z = 4.242 4.242 4.242
region		simbox prism -1.0 1.0 -1.0 1.0 -1.0 1.0 0.0 0.0 0.0
create_box	2 simbox
Created triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
lattice 			fcc 4.242  orient x 1 0 0 orient y 0 1 0 orient z 0 0 1
Lattice spacing in x,y,z = 4.242 4.242 4.242
create_atoms		1 region simbox
Created 32 atoms
  using lattice units in triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  create_atoms CPU = 0.000 seconds
lattice 			fcc 4.242  origin 0 0 0.5 orient x 1 0 0 orient y 0 1 0 orient z 0 0 1
Lattice spacing in x,y,z = 4.242 4.242 4.242
create_atoms		2 region simbox
Created 32 atoms
  using lattice units in triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  create_atoms CPU = 0.000 seconds

# Need to set mass to something, just to satisfy LAMMPS
mass 1 47.867
mass 2 14.007

include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Compute initial state
fix 3 all box/relax  aniso 0.0
minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.939 | 9.939 | 9.939 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         0   0             -423.36         0.039945526    0.039945526    0.039945526    0.039945526   -1.9807402e-11 -9.3211305e-12 -2.5633109e-11  8.484          8.484          8.484          610.66352    
         1   0             -423.36        -3.0868422e-06 -3.0864732e-06 -3.0863707e-06 -3.0876827e-06 -2.2131078e-11 -5.8323133e-12 -2.3302826e-11  8.484          8.484          8.484          610.66353    
         2   0             -423.36        -6.6331562e-10 -6.1974069e-10 -6.0121291e-10 -7.6899325e-10 -4.4271222e-11 -8.389432e-11   0              8.484          8.484          8.484          610.66353    
Loop time of 0.00427117 on 1 procs for 2 steps with 64 atoms

99.8% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.360000012731  -423.360000012738   -423.36000001274
  Force two-norm initial, final = 2.6370623e-05 4.9022082e-13
  Force max component initial, final = 1.5225086e-05 2.9309888e-13
  Final line search alpha, max atom move = 1 2.9309888e-13
  Iterations, force evaluations = 2 4

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.0042186  | 0.0042186  | 0.0042186  |   0.0 | 98.77
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 1.0208e-05 | 1.0208e-05 | 1.0208e-05 |   0.0 |  0.24
Output  | 4.916e-06  | 4.916e-06  | 4.916e-06  |   0.0 |  0.12
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.746e-05  |            |       |  0.88

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

variable tmp equal pxx
variable pxx0 equal ${tmp}
variable pxx0 equal -6.19740689879861e-10
variable tmp equal pyy
variable pyy0 equal ${tmp}
variable pyy0 equal -6.0121290652475e-10
variable tmp equal pzz
variable pzz0 equal ${tmp}
variable pzz0 equal -7.68993252531658e-10
variable tmp equal pyz
variable pyz0 equal ${tmp}
variable pyz0 equal 0
variable tmp equal pxz
variable pxz0 equal ${tmp}
variable pxz0 equal -8.38943196527712e-11
variable tmp equal pxy
variable pxy0 equal ${tmp}
variable pxy0 equal -4.42712224358384e-11

variable tmp equal lx
variable lx0 equal ${tmp}
variable lx0 equal 8.48400003529816
variable tmp equal ly
variable ly0 equal ${tmp}
variable ly0 equal 8.48400003529816
variable tmp equal lz
variable lz0 equal ${tmp}
variable lz0 equal 8.48400003529816

# These formulas define the derivatives w.r.t. strain components
# Constants uses $, variables use v_
variable d1 equal -(v_pxx1-${pxx0})/(v_delta/v_len0)*${cfac}
variable d1 equal -(v_pxx1--6.19740689879861e-10)/(v_delta/v_len0)*${cfac}
variable d1 equal -(v_pxx1--6.19740689879861e-10)/(v_delta/v_len0)*0.0001
variable d2 equal -(v_pyy1-${pyy0})/(v_delta/v_len0)*${cfac}
variable d2 equal -(v_pyy1--6.0121290652475e-10)/(v_delta/v_len0)*${cfac}
variable d2 equal -(v_pyy1--6.0121290652475e-10)/(v_delta/v_len0)*0.0001
variable d3 equal -(v_pzz1-${pzz0})/(v_delta/v_len0)*${cfac}
variable d3 equal -(v_pzz1--7.68993252531658e-10)/(v_delta/v_len0)*${cfac}
variable d3 equal -(v_pzz1--7.68993252531658e-10)/(v_delta/v_len0)*0.0001
variable d4 equal -(v_pyz1-${pyz0})/(v_delta/v_len0)*${cfac}
variable d4 equal -(v_pyz1-0)/(v_delta/v_len0)*${cfac}
variable d4 equal -(v_pyz1-0)/(v_delta/v_len0)*0.0001
variable d5 equal -(v_pxz1-${pxz0})/(v_delta/v_len0)*${cfac}
variable d5 equal -(v_pxz1--8.38943196527712e-11)/(v_delta/v_len0)*${cfac}
variable d5 equal -(v_pxz1--8.38943196527712e-11)/(v_delta/v_len0)*0.0001
variable d6 equal -(v_pxy1-${pxy0})/(v_delta/v_len0)*${cfac}
variable d6 equal -(v_pxy1--4.42712224358384e-11)/(v_delta/v_len0)*${cfac}
variable d6 equal -(v_pxy1--4.42712224358384e-11)/(v_delta/v_len0)*0.0001

displace_atoms all random ${atomjiggle} ${atomjiggle} ${atomjiggle} 87287 units box
displace_atoms all random 1e-05 ${atomjiggle} ${atomjiggle} 87287 units box
displace_atoms all random 1e-05 1e-05 ${atomjiggle} 87287 units box
displace_atoms all random 1e-05 1e-05 1e-05 87287 units box
Displacing atoms ...

# Write restart
unfix 3
write_restart restart.equil
System init for write_restart ...

# uxx Perturbation

variable dir equal 1
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
variable len0 equal ${lx0}
variable len0 equal 8.48400003529816
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*8.48400003529816
variable deltaxy equal -${up}*xy
variable deltaxy equal -1e-06*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1e-06*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 -8.48400003529816e-06 xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 -8.48400003529816e-06 xy delta -0 xz delta ${deltaxz} remap units box
change_box all x delta 0 -8.48400003529816e-06 xy delta -0 xz delta -0 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.2419915 4.242 4.242) with tilt (0 0 0)
  triclinic box = (-4.242 -4.242 -4.242) to (4.2419915 4.242 4.242) with tilt (0 0 0)
  triclinic box = (-4.242 -4.242 -4.242) to (4.2419915 4.242 4.242) with tilt (0 0 0)
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         3.2007834      6.5941672      1.5040133      1.5041699     -1.0401762e-05  1.3690052e-05  1.8556463e-05  8.4839916      8.484          8.484          610.66292    
         3   0             -423.36         3.2003763      6.5937733      1.5036765      1.5036789     -8.963374e-07  -6.5009327e-07  8.1265774e-08  8.4839916      8.484          8.484          610.66292    
         4   0             -423.36         3.2003532      6.5937521      1.5036534      1.503654      -3.0973081e-07 -9.6615861e-08 -3.1192203e-07  8.4839916      8.484          8.484          610.66292    
         5   0             -423.36         3.2003501      6.593749       1.5036506      1.5036507     -5.6329361e-08 -3.7406572e-08 -4.2031932e-08  8.4839916      8.484          8.484          610.66292    
         6   0             -423.36         3.2003496      6.5937485      1.5036502      1.5036502     -2.3051932e-08  1.3798658e-09 -2.5548079e-08  8.4839916      8.484          8.484          610.66292    
         7   0             -423.36         3.2003495      6.5937483      1.5036501      1.5036501     -4.6675578e-09 -7.3808599e-10 -6.1735073e-09  8.4839916      8.484          8.484          610.66292    
         8   0             -423.36         3.2003494      6.5937483      1.50365        1.50365       -1.4947057e-10 -1.6293035e-09 -7.4277832e-11  8.4839916      8.484          8.484          610.66292    
         9   0             -423.36         3.2003494      6.5937483      1.50365        1.50365       -4.9078992e-12 -2.1676511e-10 -1.0165868e-10  8.4839916      8.484          8.484          610.66292    
        10   0             -423.36         3.2003494      6.5937483      1.50365        1.50365        5.3179097e-11  5.7783238e-13 -7.835583e-11   8.4839916      8.484          8.484          610.66292    
        11   0             -423.36         3.2003494      6.5937483      1.50365        1.50365        1.2473406e-11 -9.3186281e-12 -1.4564281e-12  8.4839916      8.484          8.484          610.66292    
        12   0             -423.36         3.2003494      6.5937483      1.50365        1.50365        1.6144957e-11  7.7259629e-11  4.6023127e-11  8.4839916      8.484          8.484          610.66292    
        13   0             -423.36         3.2003494      6.5937483      1.50365        1.50365        5.9252269e-11  1.0335533e-10 -8.039483e-11   8.4839916      8.484          8.484          610.66292    
        14   0             -423.36         3.2003494      6.5937483      1.50365        1.50365        4.3367322e-11 -2.0174235e-11 -6.3500264e-11  8.4839916      8.484          8.484          610.66292    
        15   0             -423.36         3.2003494      6.5937483      1.50365        1.50365       -6.3041227e-11 -3.8705074e-11  1.3690424e-11  8.4839916      8.484          8.484          610.66292    
        16   0             -423.36         3.2003494      6.5937483      1.50365        1.50365        4.3894973e-11  3.5681621e-11  4.6605698e-12  8.4839916      8.484          8.484          610.66292    
        17   0             -423.36         3.2003494      6.5937483      1.50365        1.50365        6.3098428e-11  7.1454702e-11 -5.8839694e-11  8.4839916      8.484          8.484          610.66292    
Loop time of 0.0232987 on 1 procs for 15 steps with 64 atoms

99.5% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999951273  -423.360000011478  -423.360000011478
  Force two-norm initial, final = 0.0016542893 2.4092142e-11
  Force max component initial, final = 0.00026293802 4.7265802e-12
  Final line search alpha, max atom move = 1 4.7265802e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.023133   | 0.023133   | 0.023133   |   0.0 | 99.29
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 5.2122e-05 | 5.2122e-05 | 5.2122e-05 |   0.0 |  0.22
Output  | 6.6415e-05 | 6.6415e-05 | 6.6415e-05 |   0.0 |  0.29
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 4.721e-05  |            |       |  0.20

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 6.59374826342138
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1.50365001655164
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1.5036500166651
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 6.3098428057982e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 7.14547018944169e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -5.8839694071283e-11

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 659.374826404112
variable C2neg equal ${d2}
variable C2neg equal 150.365001715285
variable C3neg equal ${d3}
variable C3neg equal 150.365001743409
variable C4neg equal ${d4}
variable C4neg equal -5.8839694071283e-09
variable C5neg equal ${d5}
variable C5neg equal 1.55349021547188e-08
variable C6neg equal ${d6}
variable C6neg equal 1.0736965049382e-08

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*8.48400003529816
variable deltaxy equal ${up}*xy
variable deltaxy equal 1e-06*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1e-06*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 8.48400003529816e-06 xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 8.48400003529816e-06 xy delta 0 xz delta ${deltaxz} remap units box
change_box all x delta 0 8.48400003529816e-06 xy delta 0 xz delta 0 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.2420085 4.242 4.242) with tilt (0 0 0)
  triclinic box = (-4.242 -4.242 -4.242) to (4.2420085 4.242 4.242) with tilt (0 0 0)
  triclinic box = (-4.242 -4.242 -4.242) to (4.2420085 4.242 4.242) with tilt (0 0 0)
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36        -3.1998875     -6.593262      -1.5032786     -1.503122      -1.0401741e-05  1.3689956e-05  1.855638e-05   8.4840085      8.484          8.484          610.66414    
         3   0             -423.36        -3.2002947     -6.5936559     -1.5036153     -1.503613      -8.9624093e-07 -6.5006622e-07  8.1299691e-08  8.4840085      8.484          8.484          610.66414    
         4   0             -423.36        -3.2003178     -6.5936771     -1.5036384     -1.5036379     -3.0969485e-07 -9.6580943e-08 -3.1196306e-07  8.4840085      8.484          8.484          610.66414    
         5   0             -423.36        -3.2003209     -6.5936802     -1.5036412     -1.5036412     -5.637307e-08  -3.7432458e-08 -4.1927859e-08  8.4840085      8.484          8.484          610.66414    
         6   0             -423.36        -3.2003213     -6.5936807     -1.5036416     -1.5036416     -2.3020373e-08  1.3080279e-09 -2.5589973e-08  8.4840085      8.484          8.484          610.66414    
         7   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418     -4.740035e-09  -8.4297565e-10 -6.2550548e-09  8.4840085      8.484          8.484          610.66414    
         8   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      6.8194922e-12 -1.6922034e-09 -3.9032194e-11  8.4840085      8.484          8.484          610.66414    
         9   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      2.0792422e-11 -3.0462607e-10 -6.3208852e-11  8.4840085      8.484          8.484          610.66414    
        10   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418     -3.8222582e-11 -7.3525745e-11  7.9812099e-11  8.4840085      8.484          8.484          610.66414    
        11   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      4.8722828e-11 -4.6517647e-11 -1.0107591e-10  8.4840085      8.484          8.484          610.66414    
        12   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      2.9717395e-11  2.9501735e-11 -1.3981682e-11  8.4840085      8.484          8.484          610.66414    
        13   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      3.4307551e-11 -4.2409295e-11  4.514918e-11   8.4840085      8.484          8.484          610.66414    
        14   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418     -1.989678e-11  -2.0233583e-11 -2.1263807e-11  8.4840085      8.484          8.484          610.66414    
        15   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      1.927301e-11   5.7245919e-11  1.6311962e-11  8.4840085      8.484          8.484          610.66414    
        16   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      9.4474491e-12  2.7059502e-11 -3.7284484e-11  8.4840085      8.484          8.484          610.66414    
        17   0             -423.36        -3.2003215     -6.5936809     -1.5036418     -1.5036418      2.0390122e-11  1.9533968e-11  3.7575769e-11  8.4840085      8.484          8.484          610.66414    
Loop time of 0.020893 on 1 procs for 15 steps with 64 atoms

99.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999951274  -423.360000011478  -423.360000011478
  Force two-norm initial, final = 0.0016542794 2.4090326e-11
  Force max component initial, final = 0.00026293827 4.2494896e-12
  Final line search alpha, max atom move = 1 4.2494896e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020755   | 0.020755   | 0.020755   |   0.0 | 99.34
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.7501e-05 | 4.7501e-05 | 4.7501e-05 |   0.0 |  0.23
Output  | 5.2669e-05 | 5.2669e-05 | 5.2669e-05 |   0.0 |  0.25
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.804e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -423.360000011478
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -3.20032152872313
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -6.59368094716067
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -1.50364181947319
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -1.50364181953552
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 2.03901222231786e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.95339678352768e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 3.75757690820278e-11

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 659.368094654093
variable C2pos equal ${d2}
variable C2pos equal 150.364181887198
variable C3pos equal ${d3}
variable C3pos equal 150.364181876653
variable C4pos equal ${d4}
variable C4pos equal -3.75757690820278e-09
variable C5pos equal ${d5}
variable C5pos equal -1.03428287488048e-08
variable C6pos equal ${d6}
variable C6pos equal -6.4661344659017e-09

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C11 equal 0.5*(${C1neg}+${C1pos})
variable C11 equal 0.5*(659.374826404112+${C1pos})
variable C11 equal 0.5*(659.374826404112+659.368094654093)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C21 equal 0.5*(${C2neg}+${C2pos})
variable C21 equal 0.5*(150.365001715285+${C2pos})
variable C21 equal 0.5*(150.365001715285+150.364181887198)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C31 equal 0.5*(${C3neg}+${C3pos})
variable C31 equal 0.5*(150.365001743409+${C3pos})
variable C31 equal 0.5*(150.365001743409+150.364181876653)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C41 equal 0.5*(${C4neg}+${C4pos})
variable C41 equal 0.5*(-5.8839694071283e-09+${C4pos})
variable C41 equal 0.5*(-5.8839694071283e-09+-3.75757690820278e-09)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C51 equal 0.5*(${C5neg}+${C5pos})
variable C51 equal 0.5*(1.55349021547188e-08+${C5pos})
variable C51 equal 0.5*(1.55349021547188e-08+-1.03428287488048e-08)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C61 equal 0.5*(${C6neg}+${C6pos})
variable C61 equal 0.5*(1.0736965049382e-08+${C6pos})
variable C61 equal 0.5*(1.0736965049382e-08+-6.4661344659017e-09)

# Delete dir to make sure it is not reused

variable dir delete

# uyy Perturbation

variable dir equal 2
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
variable len0 equal ${ly0}
variable len0 equal 8.48400003529816
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*8.48400003529816
variable deltaxy equal -${up}*xy
variable deltaxy equal -1e-06*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1e-06*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box
change_box all y delta 0 -8.48400003529816e-06 yz delta ${deltayz} remap units box
change_box all y delta 0 -8.48400003529816e-06 yz delta -0 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.2419915 4.242) with tilt (0 0 0)
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.2419915 4.242) with tilt (0 0 0)
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         3.2007834      1.5040689      6.5941115      1.5041699     -1.0401721e-05  1.3689964e-05  1.8556523e-05  8.484          8.4839916      8.484          610.66292    
         3   0             -423.36         3.2003763      1.5036751      6.5937748      1.5036789     -8.9629363e-07 -6.5014079e-07  8.1172271e-08  8.484          8.4839916      8.484          610.66292    
         4   0             -423.36         3.2003532      1.5036539      6.5937517      1.503654      -3.0979425e-07 -9.6586879e-08 -3.1194796e-07  8.484          8.4839916      8.484          610.66292    
         5   0             -423.36         3.2003501      1.5036507      6.5937489      1.5036507     -5.6336538e-08 -3.7355654e-08 -4.188891e-08   8.484          8.4839916      8.484          610.66292    
         6   0             -423.36         3.2003496      1.5036503      6.5937484      1.5036502     -2.3067179e-08  1.3951414e-09 -2.5656146e-08  8.484          8.4839916      8.484          610.66292    
         7   0             -423.36         3.2003495      1.5036501      6.5937483      1.5036501     -4.7035129e-09 -7.7681147e-10 -6.2040923e-09  8.484          8.4839916      8.484          610.66292    
         8   0             -423.36         3.2003494      1.50365        6.5937483      1.50365       -9.2107423e-11 -1.6564847e-09 -7.7481973e-11  8.484          8.4839916      8.484          610.66292    
         9   0             -423.36         3.2003494      1.50365        6.5937483      1.50365       -7.1662394e-11 -2.4449418e-10 -6.3208978e-11  8.484          8.4839916      8.484          610.66292    
        10   0             -423.36         3.2003494      1.50365        6.5937483      1.50365       -9.7412754e-12 -4.799177e-11   1.1068853e-11  8.484          8.4839916      8.484          610.66292    
        11   0             -423.36         3.2003494      1.50365        6.5937483      1.50365        2.1618631e-11  5.3380043e-11  6.4082835e-11  8.484          8.4839916      8.484          610.66292    
        12   0             -423.36         3.2003494      1.50365        6.5937483      1.50365       -2.8228404e-11 -2.6333854e-11 -8.4472828e-12  8.484          8.4839916      8.484          610.66292    
        13   0             -423.36         3.2003494      1.50365        6.5937483      1.50365        4.3760711e-11 -2.8654132e-11 -5.5344267e-12  8.484          8.4839916      8.484          610.66292    
        14   0             -423.36         3.2003494      1.50365        6.5937483      1.50365        1.8898517e-11 -3.3735147e-11 -5.1557554e-11  8.484          8.4839916      8.484          610.66292    
        15   0             -423.36         3.2003494      1.50365        6.5937483      1.50365        1.8748196e-12  6.0029697e-11  5.8257123e-11  8.484          8.4839916      8.484          610.66292    
        16   0             -423.36         3.2003494      1.50365        6.5937483      1.50365        4.0183239e-12 -2.3704402e-11  1.9807422e-11  8.484          8.4839916      8.484          610.66292    
        17   0             -423.36         3.2003494      1.50365        6.5937483      1.50365       -8.2139924e-12 -1.1361411e-11 -4.3692842e-12  8.484          8.4839916      8.484          610.66292    
Loop time of 0.0204433 on 1 procs for 15 steps with 64 atoms

99.8% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999951273  -423.360000011478  -423.360000011478
  Force two-norm initial, final = 0.0016542886 2.3942668e-11
  Force max component initial, final = 0.00026293834 4.3564631e-12
  Final line search alpha, max atom move = 1 4.3564631e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020298   | 0.020298   | 0.020298   |   0.0 | 99.29
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.579e-05  | 4.579e-05  | 4.579e-05  |   0.0 |  0.22
Output  | 6.2794e-05 | 6.2794e-05 | 6.2794e-05 |   0.0 |  0.31
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.696e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1.50365001654902
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 6.59374826330458
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 1.50365001657465
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -8.21399242933069e-12
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -1.1361411196521e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -4.36928421321409e-12

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 150.365001716876
variable C2neg equal ${d2}
variable C2neg equal 659.374826390579
variable C3neg equal ${d3}
variable C3neg equal 150.365001734364
variable C4neg equal ${d4}
variable C4neg equal -4.36928421321409e-10
variable C5neg equal ${d5}
variable C5neg equal 7.25329084562502e-09
variable C6neg equal ${d6}
variable C6neg equal 3.60572300065077e-09

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*8.48400003529816
variable deltaxy equal ${up}*xy
variable deltaxy equal 1e-06*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1e-06*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box
change_box all y delta 0 8.48400003529816e-06 yz delta ${deltayz} remap units box
change_box all y delta 0 8.48400003529816e-06 yz delta 0 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.2420085 4.242) with tilt (0 0 0)
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.2420085 4.242) with tilt (0 0 0)
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36        -3.1998875     -1.5032229     -6.5933177     -1.503122      -1.0401746e-05  1.3689992e-05  1.8556385e-05  8.484          8.4840085      8.484          610.66414    
         3   0             -423.36        -3.2002947     -1.5036167     -6.5936544     -1.503613      -8.9630752e-07 -6.5004301e-07  8.1233861e-08  8.484          8.4840085      8.484          610.66414    
         4   0             -423.36        -3.2003178     -1.503638      -6.5936775     -1.5036379     -3.0971773e-07 -9.6622831e-08 -3.1192607e-07  8.484          8.4840085      8.484          610.66414    
         5   0             -423.36        -3.2003209     -1.5036411     -6.5936803     -1.5036412     -5.635288e-08  -3.7358468e-08 -4.1962522e-08  8.484          8.4840085      8.484          610.66414    
         6   0             -423.36        -3.2003213     -1.5036416     -6.5936808     -1.5036416     -2.309786e-08   1.2717002e-09 -2.5592594e-08  8.484          8.4840085      8.484          610.66414    
         7   0             -423.36        -3.2003215     -1.5036417     -6.5936809     -1.5036418     -4.650436e-09  -7.9752656e-10 -6.279814e-09   8.484          8.4840085      8.484          610.66414    
         8   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418     -3.8929125e-11 -1.563893e-09  -2.4467943e-11  8.484          8.4840085      8.484          610.66414    
         9   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418     -4.5175277e-11 -2.404573e-10  -2.5633083e-11  8.484          8.4840085      8.484          610.66414    
        10   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418     -5.457999e-11  -4.038491e-11   5.2431306e-12  8.484          8.4840085      8.484          610.66414    
        11   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418      1.5345043e-11  2.3439153e-12  5.0101025e-11  8.484          8.4840085      8.484          610.66414    
        12   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418     -4.6880061e-11 -7.4564247e-11 -1.2612642e-10  8.484          8.4840085      8.484          610.66414    
        13   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418      2.9385887e-12 -8.857449e-11   1.0369747e-10  8.484          8.4840085      8.484          610.66414    
        14   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418      4.0695371e-11 -4.3427905e-11  3.8158339e-11  8.484          8.4840085      8.484          610.66414    
        15   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418      3.3706814e-11 -3.4378394e-11  3.4080349e-11  8.484          8.4840085      8.484          610.66414    
        16   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418      4.61931e-11   -5.1784534e-11  1.4855537e-11  8.484          8.4840085      8.484          610.66414    
        17   0             -423.36        -3.2003215     -1.5036418     -6.5936809     -1.5036418      4.0041416e-11  3.6067057e-11  3.2623924e-11  8.484          8.4840085      8.484          610.66414    
Loop time of 0.0203265 on 1 procs for 15 steps with 64 atoms

99.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999951273  -423.360000011477  -423.360000011477
  Force two-norm initial, final = 0.0016542801 2.4019177e-11
  Force max component initial, final = 0.00026293795 4.4755311e-12
  Final line search alpha, max atom move = 1 4.4755311e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020196   | 0.020196   | 0.020196   |   0.0 | 99.36
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.5919e-05 | 4.5919e-05 | 4.5919e-05 |   0.0 |  0.23
Output  | 4.8002e-05 | 4.8002e-05 | 4.8002e-05 |   0.0 |  0.24
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.7e-05    |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -423.360000011477
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -3.20032152853112
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -1.50364181931473
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -6.59368094697599
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -1.50364181930264
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 4.00414156133687e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 3.60670569371636e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 3.26239235440862e-11

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 150.364181869499
variable C2pos equal ${d2}
variable C2pos equal 659.368094637478
variable C3pos equal ${d3}
variable C3pos equal 150.364181853365
variable C4pos equal ${d4}
variable C4pos equal -3.26239235440862e-09
variable C5pos equal ${d5}
variable C5pos equal -1.19961376589935e-08
variable C6pos equal ${d6}
variable C6pos equal -8.43126380492071e-09

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C12 equal 0.5*(${C1neg}+${C1pos})
variable C12 equal 0.5*(150.365001716876+${C1pos})
variable C12 equal 0.5*(150.365001716876+150.364181869499)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C22 equal 0.5*(${C2neg}+${C2pos})
variable C22 equal 0.5*(659.374826390579+${C2pos})
variable C22 equal 0.5*(659.374826390579+659.368094637478)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C32 equal 0.5*(${C3neg}+${C3pos})
variable C32 equal 0.5*(150.365001734364+${C3pos})
variable C32 equal 0.5*(150.365001734364+150.364181853365)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C42 equal 0.5*(${C4neg}+${C4pos})
variable C42 equal 0.5*(-4.36928421321409e-10+${C4pos})
variable C42 equal 0.5*(-4.36928421321409e-10+-3.26239235440862e-09)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C52 equal 0.5*(${C5neg}+${C5pos})
variable C52 equal 0.5*(7.25329084562502e-09+${C5pos})
variable C52 equal 0.5*(7.25329084562502e-09+-1.19961376589935e-08)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C62 equal 0.5*(${C6neg}+${C6pos})
variable C62 equal 0.5*(3.60572300065077e-09+${C6pos})
variable C62 equal 0.5*(3.60572300065077e-09+-8.43126380492071e-09)

# Delete dir to make sure it is not reused

variable dir delete

# uzz Perturbation

variable dir equal 3
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 8.48400003529816
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*8.48400003529816
variable deltaxy equal -${up}*xy
variable deltaxy equal -1e-06*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1e-06*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
change_box all z delta 0 ${delta} remap units box
change_box all z delta 0 -8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.2419915) with tilt (0 0 0)
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         3.2007834      1.5040689      1.5040133      6.5942681     -1.0401757e-05  1.3690223e-05  1.8556346e-05  8.484          8.484          8.4839916      610.66292    
         3   0             -423.36         3.2003763      1.5036751      1.5036765      6.5937771     -8.9630118e-07 -6.5010147e-07  8.1212177e-08  8.484          8.484          8.4839916      610.66292    
         4   0             -423.36         3.2003532      1.5036539      1.5036534      6.5937522     -3.0978062e-07 -9.6625002e-08 -3.1187368e-07  8.484          8.484          8.4839916      610.66292    
         5   0             -423.36         3.2003501      1.5036507      1.5036506      6.5937489     -5.6360456e-08 -3.7361936e-08 -4.1978335e-08  8.484          8.484          8.4839916      610.66292    
         6   0             -423.36         3.2003496      1.5036503      1.5036502      6.5937485     -2.3057427e-08  1.3083545e-09 -2.5515163e-08  8.484          8.484          8.4839916      610.66292    
         7   0             -423.36         3.2003495      1.5036501      1.5036501      6.5937483     -4.6868354e-09 -7.999199e-10  -6.2177827e-09  8.484          8.484          8.4839916      610.66292    
         8   0             -423.36         3.2003494      1.50365        1.50365        6.5937483     -4.9953149e-11 -1.6230042e-09 -1.4185609e-10  8.484          8.484          8.4839916      610.66292    
         9   0             -423.36         3.2003494      1.50365        1.50365        6.5937483     -5.8891061e-11 -2.8150126e-10  1.3981709e-11  8.484          8.484          8.4839916      610.66292    
        10   0             -423.36         3.2003494      1.50365        1.50365        6.5937483      4.302468e-11  -1.3250741e-11 -4.3692842e-11  8.484          8.484          8.4839916      610.66292    
        11   0             -423.36         3.2003494      1.50365        1.50365        6.5937483      2.0342973e-11  1.1860162e-11  5.447041e-11   8.484          8.484          8.4839916      610.66292    
        12   0             -423.36         3.2003494      1.50365        1.50365        6.5937483      2.1673796e-11  2.4622891e-11  5.7674552e-11  8.484          8.484          8.4839916      610.66292    
        13   0             -423.36         3.2003494      1.50365        1.50365        6.5937483     -1.7407047e-12  1.8802986e-11 -7.9520973e-11  8.484          8.484          8.4839916      610.66292    
        14   0             -423.36         3.2003494      1.50365        1.50365        6.5937483     -1.6570649e-11 -2.8324691e-11 -4.1362557e-11  8.484          8.484          8.4839916      610.66292    
        15   0             -423.36         3.2003494      1.50365        1.50365        6.5937483      2.2756514e-12  1.2435008e-11 -5.8257123e-13  8.484          8.484          8.4839916      610.66292    
        16   0             -423.36         3.2003494      1.50365        1.50365        6.5937483     -5.4889503e-11  7.551778e-12  -3.786713e-12   8.484          8.484          8.4839916      610.66292    
        17   0             -423.36         3.2003494      1.50365        1.50365        6.5937483      5.1982527e-11 -2.9402875e-13 -4.8644698e-11  8.484          8.484          8.4839916      610.66292    
Loop time of 0.0204262 on 1 procs for 15 steps with 64 atoms

99.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999951273  -423.360000011477  -423.360000011477
  Force two-norm initial, final = 0.0016542906 2.4197204e-11
  Force max component initial, final = 0.00026294062 4.2901238e-12
  Final line search alpha, max atom move = 1 4.2901238e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.02029    | 0.02029    | 0.02029    |   0.0 | 99.33
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.5792e-05 | 4.5792e-05 | 4.5792e-05 |   0.0 |  0.22
Output  | 5.3668e-05 | 5.3668e-05 | 5.3668e-05 |   0.0 |  0.26
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.671e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1.50365001653562
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1.50365001657319
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 6.59374826333341
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 5.19825268284514e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -2.94028745586379e-13
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -4.86446975737835e-11

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 150.365001715536
variable C2neg equal ${d2}
variable C2neg equal 150.36500171744
variable C3neg equal ${d3}
variable C3neg equal 659.37482641024
variable C4neg equal ${d4}
variable C4neg equal -4.86446975737835e-09
variable C5neg equal ${d5}
variable C5neg equal 8.36002909071848e-09
variable C6neg equal ${d6}
variable C6neg equal 9.62537492642898e-09

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*8.48400003529816
variable deltaxy equal ${up}*xy
variable deltaxy equal 1e-06*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1e-06*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
change_box all z delta 0 ${delta} remap units box
change_box all z delta 0 8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.2420085) with tilt (0 0 0)
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36        -3.1998875     -1.5032229     -1.5032786     -6.5931611     -1.040181e-05   1.3689812e-05  1.8556307e-05  8.484          8.484          8.4840085      610.66414    
         3   0             -423.36        -3.2002947     -1.5036167     -1.5036153     -6.5936521     -8.9630078e-07 -6.5010268e-07  8.1325616e-08  8.484          8.484          8.4840085      610.66414    
         4   0             -423.36        -3.2003178     -1.503638      -1.5036384     -6.593677      -3.0975916e-07 -9.6560905e-08 -3.1202598e-07  8.484          8.484          8.4840085      610.66414    
         5   0             -423.36        -3.2003209     -1.5036411     -1.5036412     -6.5936803     -5.6383506e-08 -3.7419206e-08 -4.2012331e-08  8.484          8.484          8.4840085      610.66414    
         6   0             -423.36        -3.2003213     -1.5036416     -1.5036416     -6.5936808     -2.3046198e-08  1.305366e-09  -2.563017e-08   8.484          8.484          8.4840085      610.66414    
         7   0             -423.36        -3.2003215     -1.5036417     -1.5036418     -6.5936809     -4.7014684e-09 -7.065027e-10  -6.2926305e-09  8.484          8.484          8.4840085      610.66414    
         8   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809     -7.1372028e-11 -1.6414179e-09 -1.0661032e-10  8.484          8.484          8.4840085      610.66414    
         9   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809      1.3193645e-11 -2.0406544e-10 -7.2821258e-11  8.484          8.484          8.4840085      610.66414    
        10   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809     -2.4378844e-11 -3.533481e-11  -4.980974e-11   8.484          8.484          8.4840085      610.66414    
        11   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809     -2.3758048e-11 -1.1485444e-11 -6.6995557e-12  8.484          8.484          8.4840085      610.66414    
        12   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809      5.6915077e-11 -3.1015294e-11 -1.0049334e-10  8.484          8.484          8.4840085      610.66414    
        13   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809     -1.2699883e-11 -1.9893735e-11  4.398404e-11   8.484          8.484          8.4840085      610.66414    
        14   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809      2.1353339e-11  7.0943077e-12  3.7284484e-11  8.484          8.484          8.4840085      610.66414    
        15   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809     -3.0925655e-11  2.3319225e-11  9.4085065e-11  8.484          8.484          8.4840085      610.66414    
        16   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809      2.3561637e-11 -2.202308e-11  -6.1169857e-12  8.484          8.484          8.4840085      610.66414    
        17   0             -423.36        -3.2003215     -1.5036418     -1.5036418     -6.5936809     -2.8959254e-11 -1.5383081e-11 -9.321121e-12   8.484          8.484          8.4840085      610.66414    
Loop time of 0.0204382 on 1 procs for 15 steps with 64 atoms

99.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999951274  -423.360000011477  -423.360000011478
  Force two-norm initial, final = 0.0016542781 2.4126381e-11
  Force max component initial, final = 0.00026293567 4.5323745e-12
  Final line search alpha, max atom move = 1 4.5323745e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020304   | 0.020304   | 0.020304   |   0.0 | 99.34
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.6042e-05 | 4.6042e-05 | 4.6042e-05 |   0.0 |  0.23
Output  | 5.1626e-05 | 5.1626e-05 | 5.1626e-05 |   0.0 |  0.25
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.687e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -423.360000011478
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -3.20032152864579
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -1.50364181937473
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -1.5036418193727
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -6.59368094718994
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -2.89592538085627e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -1.53830807140842e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -9.32112101259605e-12

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 150.364181875499
variable C2pos equal ${d2}
variable C2pos equal 150.364181877149
variable C3pos equal ${d3}
variable C3pos equal 659.368094642095
variable C4pos equal ${d4}
variable C4pos equal 9.32112101259605e-10
variable C5pos equal ${d5}
variable C5pos equal -6.8511238938687e-09
variable C6pos equal ${d6}
variable C6pos equal -1.53119686272757e-09

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C13 equal 0.5*(${C1neg}+${C1pos})
variable C13 equal 0.5*(150.365001715536+${C1pos})
variable C13 equal 0.5*(150.365001715536+150.364181875499)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C23 equal 0.5*(${C2neg}+${C2pos})
variable C23 equal 0.5*(150.36500171744+${C2pos})
variable C23 equal 0.5*(150.36500171744+150.364181877149)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C33 equal 0.5*(${C3neg}+${C3pos})
variable C33 equal 0.5*(659.37482641024+${C3pos})
variable C33 equal 0.5*(659.37482641024+659.368094642095)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C43 equal 0.5*(${C4neg}+${C4pos})
variable C43 equal 0.5*(-4.86446975737835e-09+${C4pos})
variable C43 equal 0.5*(-4.86446975737835e-09+9.32112101259605e-10)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C53 equal 0.5*(${C5neg}+${C5pos})
variable C53 equal 0.5*(8.36002909071848e-09+${C5pos})
variable C53 equal 0.5*(8.36002909071848e-09+-6.8511238938687e-09)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C63 equal 0.5*(${C6neg}+${C6pos})
variable C63 equal 0.5*(9.62537492642898e-09+${C6pos})
variable C63 equal 0.5*(9.62537492642898e-09+-1.53119686272757e-09)

# Delete dir to make sure it is not reused

variable dir delete

# uyz Perturbation

variable dir equal 4
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 8.48400003529816
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*8.48400003529816
variable deltaxy equal -${up}*xy
variable deltaxy equal -1e-06*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1e-06*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
change_box all yz delta ${delta} remap units box
change_box all yz delta -8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 -8.484e-06)
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         0.00043564612  0.00041921445  0.00036499009  0.00052273381 -1.0401652e-05  1.3690034e-05  1.8339354      8.484          8.484          8.484          610.66353    
         3   0             -423.36         2.8453419e-05  2.5364588e-05  2.8276363e-05  3.1719305e-05 -8.9632262e-07 -6.5009794e-07  1.8339169      8.484          8.484          8.484          610.66353    
         4   0             -423.36         5.3773814e-06  4.1536358e-06  5.1597225e-06  6.8187858e-06 -3.0974993e-07 -9.6659921e-08  1.8339165      8.484          8.484          8.484          610.66353    
         5   0             -423.36         2.2881748e-06  1.0211319e-06  2.3428652e-06  3.5005272e-06 -5.6319639e-08 -3.7453427e-08  1.8339168      8.484          8.484          8.484          610.66353    
         6   0             -423.36         1.8370823e-06  5.4100699e-07  1.913811e-06   3.0564291e-06 -2.308521e-08   1.3313312e-09  1.8339168      8.484          8.484          8.484          610.66353    
         7   0             -423.36         1.6953762e-06  3.6101009e-07  1.7981585e-06  2.92696e-06   -4.7225572e-09 -8.9125623e-10  1.8339168      8.484          8.484          8.484          610.66353    
         8   0             -423.36         1.6439555e-06  3.0131397e-07  1.7537037e-06  2.8768489e-06 -4.9878095e-11 -1.6148476e-09  1.8339168      8.484          8.484          8.484          610.66353    
         9   0             -423.36         1.634847e-06   2.9141565e-07  1.7450277e-06  2.8680975e-06 -9.3402763e-11 -1.9631496e-10  1.8339168      8.484          8.484          8.484          610.66353    
        10   0             -423.36         1.633426e-06   2.9028383e-07  1.7436004e-06  2.8663938e-06  2.9683896e-11 -3.9477357e-11  1.8339168      8.484          8.484          8.484          610.66353    
        11   0             -423.36         1.6332496e-06  2.9019483e-07  1.7433657e-06  2.8661882e-06  1.9103919e-11  2.9220824e-12  1.8339168      8.484          8.484          8.484          610.66353    
        12   0             -423.36         1.6333166e-06  2.9019595e-07  1.7434749e-06  2.866279e-06   2.0116888e-11 -2.8499636e-11  1.8339168      8.484          8.484          8.484          610.66353    
        13   0             -423.36         1.6333106e-06  2.9025243e-07  1.7433756e-06  2.8663037e-06 -3.4780817e-11 -1.0607983e-11  1.8339168      8.484          8.484          8.484          610.66353    
        14   0             -423.36         1.6335382e-06  2.9030311e-07  1.7437304e-06  2.8665811e-06  4.5174204e-11 -3.5337088e-11  1.8339168      8.484          8.484          8.484          610.66353    
        15   0             -423.36         1.6334225e-06  2.9026058e-07  1.7435247e-06  2.8664824e-06  5.1799886e-12 -1.8898415e-11  1.8339168      8.484          8.484          8.484          610.66353    
        16   0             -423.36         1.6334282e-06  2.9026524e-07  1.7435751e-06  2.8664442e-06  7.9237291e-12 -2.4265475e-11  1.8339168      8.484          8.484          8.484          610.66353    
        17   0             -423.36         1.6333392e-06  2.9015281e-07  1.7434871e-06  2.8663776e-06  4.5683915e-11  2.4828383e-11  1.8339168      8.484          8.484          8.484          610.66353    
Loop time of 0.0204613 on 1 procs for 15 steps with 64 atoms

99.8% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999952181  -423.360000012384  -423.360000012385
  Force two-norm initial, final = 0.0016542846 2.353789e-11
  Force max component initial, final = 0.00026293805 4.0306542e-12
  Final line search alpha, max atom move = 1 4.0306542e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020321   | 0.020321   | 0.020321   |   0.0 | 99.31
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.5624e-05 | 4.5624e-05 | 4.5624e-05 |   0.0 |  0.22
Output  | 5.7668e-05 | 5.7668e-05 | 5.7668e-05 |   0.0 |  0.28
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.733e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 2.9015280559011e-07
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1.74348713524819e-06
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 2.86637763651468e-06
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 4.56839154296921e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 2.48283832176611e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.83391682659591

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 2.9077254627999e-05
variable C2neg equal ${d2}
variable C2neg equal 0.000174408834815471
variable C3neg equal ${d3}
variable C3neg equal 0.000286714662976721
variable C4neg equal ${d4}
variable C4neg equal 183.391682659591
variable C5neg equal ${d5}
variable C5neg equal 1.08722702870432e-08
variable C6neg equal ${d6}
variable C6neg equal 8.99551378655305e-09

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*8.48400003529816
variable deltaxy equal ${up}*xy
variable deltaxy equal 1e-06*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1e-06*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
change_box all yz delta ${delta} remap units box
change_box all yz delta 8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 8.484e-06)
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         0.00043564591  0.00041921444  0.00036498959  0.00052273369 -1.0401816e-05  1.368992e-05  -1.8338983      8.484          8.484          8.484          610.66353    
         3   0             -423.36         2.8453433e-05  2.5364765e-05  2.8276263e-05  3.1719272e-05 -8.9628716e-07 -6.5007469e-07 -1.8339167      8.484          8.484          8.484          610.66353    
         4   0             -423.36         5.3774452e-06  4.153563e-06   5.159841e-06   6.8189314e-06 -3.0977091e-07 -9.6661214e-08 -1.8339171      8.484          8.484          8.484          610.66353    
         5   0             -423.36         2.2883255e-06  1.0212298e-06  2.3429733e-06  3.5007735e-06 -5.6373233e-08 -3.7334543e-08 -1.8339169      8.484          8.484          8.484          610.66353    
         6   0             -423.36         1.8371782e-06  5.4119458e-07  1.913915e-06   3.056425e-06  -2.2988713e-08  1.3519331e-09 -1.8339169      8.484          8.484          8.484          610.66353    
         7   0             -423.36         1.6954948e-06  3.6107126e-07  1.7983222e-06  2.927091e-06  -4.7100297e-09 -7.7366415e-10 -1.8339168      8.484          8.484          8.484          610.66353    
         8   0             -423.36         1.6438997e-06  3.0116658e-07  1.753752e-06   2.8767806e-06 -6.3684573e-11 -1.5897005e-09 -1.8339168      8.484          8.484          8.484          610.66353    
         9   0             -423.36         1.6348922e-06  2.9149022e-07  1.7451285e-06  2.8680578e-06 -1.5666743e-11 -2.3665063e-10 -1.8339168      8.484          8.484          8.484          610.66353    
        10   0             -423.36         1.6335617e-06  2.9039802e-07  1.7437117e-06  2.8665753e-06  1.6938232e-11 -9.1447115e-12 -1.8339168      8.484          8.484          8.484          610.66353    
        11   0             -423.36         1.6332784e-06  2.9007075e-07  1.7433491e-06  2.8664155e-06 -1.4243467e-11 -4.1174066e-12 -1.8339168      8.484          8.484          8.484          610.66353    
        12   0             -423.36         1.6333387e-06  2.9028508e-07  1.7434542e-06  2.8662767e-06  7.8575067e-12  1.0876965e-11 -1.8339168      8.484          8.484          8.484          610.66353    
        13   0             -423.36         1.6334359e-06  2.9033049e-07  1.7435393e-06  2.8664379e-06  4.092082e-11   4.5245257e-11 -1.8339168      8.484          8.484          8.484          610.66353    
        14   0             -423.36         1.6334256e-06  2.9025009e-07  1.7436016e-06  2.866425e-06   3.0934098e-11 -8.5607602e-11 -1.8339168      8.484          8.484          8.484          610.66353    
        15   0             -423.36         1.6333639e-06  2.9021456e-07  1.7435288e-06  2.8663482e-06  5.2559448e-11 -3.512766e-11  -1.8339168      8.484          8.484          8.484          610.66353    
        16   0             -423.36         1.6335125e-06  2.9037884e-07  1.743652e-06   2.8665065e-06 -3.5977935e-11  3.8623119e-12 -1.8339168      8.484          8.484          8.484          610.66353    
        17   0             -423.36         1.6334754e-06  2.9029495e-07  1.7436931e-06  2.8664381e-06  8.1115524e-11  6.5835531e-11 -1.8339168      8.484          8.484          8.484          610.66353    
Loop time of 0.0201549 on 1 procs for 15 steps with 64 atoms

99.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999952181  -423.360000012384  -423.360000012385
  Force two-norm initial, final = 0.0016542841 2.3533902e-11
  Force max component initial, final = 0.00026293824 4.0277226e-12
  Final line search alpha, max atom move = 1 4.0277226e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020025   | 0.020025   | 0.020025   |   0.0 | 99.35
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.6125e-05 | 4.6125e-05 | 4.6125e-05 |   0.0 |  0.23
Output  | 4.7082e-05 | 4.7082e-05 | 4.7082e-05 |   0.0 |  0.23
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.708e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -423.360000012385
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1.63347536833947e-06
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 2.90294952827723e-07
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 1.7436930739715e-06
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 2.86643807821919e-06
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 8.11155238435356e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 6.58355305458558e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -1.8339168266498

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -2.90914693517603e-05
variable C2pos equal ${d2}
variable C2pos equal -0.000174429428687802
variable C3pos equal ${d3}
variable C3pos equal -0.000286720707147172
variable C4pos equal ${d4}
variable C4pos equal 183.39168266498
variable C5pos equal ${d5}
variable C5pos equal -1.49729850198627e-08
variable C6pos equal ${d6}
variable C6pos equal -1.25386746279374e-08

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C14 equal 0.5*(${C1neg}+${C1pos})
variable C14 equal 0.5*(2.9077254627999e-05+${C1pos})
variable C14 equal 0.5*(2.9077254627999e-05+-2.90914693517603e-05)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C24 equal 0.5*(${C2neg}+${C2pos})
variable C24 equal 0.5*(0.000174408834815471+${C2pos})
variable C24 equal 0.5*(0.000174408834815471+-0.000174429428687802)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C34 equal 0.5*(${C3neg}+${C3pos})
variable C34 equal 0.5*(0.000286714662976721+${C3pos})
variable C34 equal 0.5*(0.000286714662976721+-0.000286720707147172)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C44 equal 0.5*(${C4neg}+${C4pos})
variable C44 equal 0.5*(183.391682659591+${C4pos})
variable C44 equal 0.5*(183.391682659591+183.39168266498)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C54 equal 0.5*(${C5neg}+${C5pos})
variable C54 equal 0.5*(1.08722702870432e-08+${C5pos})
variable C54 equal 0.5*(1.08722702870432e-08+-1.49729850198627e-08)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C64 equal 0.5*(${C6neg}+${C6pos})
variable C64 equal 0.5*(8.99551378655305e-09+${C6pos})
variable C64 equal 0.5*(8.99551378655305e-09+-1.25386746279374e-08)

# Delete dir to make sure it is not reused

variable dir delete

# uxz Perturbation

variable dir equal 5
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 8.48400003529816
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*8.48400003529816
variable deltaxy equal -${up}*xy
variable deltaxy equal -1e-06*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1e-06*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
change_box all xz delta ${delta} remap units box
change_box all xz delta -8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 -8.484e-06 0)
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         0.00043564618  0.00042066789  0.00036353669  0.00052273397 -1.0401808e-05  1.8339305      1.8556349e-05  8.484          8.484          8.484          610.66353    
         3   0             -423.36         2.8453459e-05  2.6818092e-05  2.6822999e-05  3.1719286e-05 -8.9634162e-07  1.8339162      8.1338805e-08  8.484          8.484          8.484          610.66353    
         4   0             -423.36         5.3774043e-06  5.6069205e-06  3.706454e-06   6.8188384e-06 -3.0966683e-07  1.8339167     -3.118722e-07   8.484          8.484          8.484          610.66353    
         5   0             -423.36         2.2883079e-06  2.4746244e-06  8.8963635e-07  3.5006628e-06 -5.6357338e-08  1.8339168     -4.2013539e-08  8.484          8.484          8.484          610.66353    
         6   0             -423.36         1.8371949e-06  1.9944588e-06  4.6064735e-07  3.0564784e-06 -2.3062398e-08  1.8339168     -2.5513681e-08  8.484          8.484          8.484          610.66353    
         7   0             -423.36         1.6955118e-06  1.8144858e-06  3.4485153e-07  2.927198e-06  -4.6950207e-09  1.8339168     -6.2620519e-09  8.484          8.484          8.484          610.66353    
         8   0             -423.36         1.6438315e-06  1.7544152e-06  3.0033235e-07  2.876747e-06  -6.7179219e-11  1.8339168     -6.6413054e-11  8.484          8.484          8.484          610.66353    
         9   0             -423.36         1.6349394e-06  1.7448761e-06  2.9185799e-07  2.868084e-06  -4.1336899e-11  1.8339168     -7.0782333e-11  8.484          8.484          8.484          610.66353    
        10   0             -423.36         1.6335813e-06  1.7437272e-06  2.9039253e-07  2.8666241e-06 -3.2120387e-11  1.8339168     -1.4564266e-11  8.484          8.484          8.484          610.66353    
        11   0             -423.36         1.633366e-06   1.7435666e-06  2.9009979e-07  2.8664317e-06 -6.3490714e-11  1.8339168     -6.8743336e-11  8.484          8.484          8.484          610.66353    
        12   0             -423.36         1.633455e-06   1.7437027e-06  2.9023582e-07  2.8664266e-06  3.1453617e-11  1.8339168      5.0392361e-11  8.484          8.484          8.484          610.66353    
        13   0             -423.36         1.6335222e-06  1.7436996e-06  2.904138e-07   2.8664534e-06 -7.7375147e-12  1.8339168      4.3692798e-12  8.484          8.484          8.484          610.66353    
        14   0             -423.36         1.633421e-06   1.7436955e-06  2.9020698e-07  2.8663606e-06  7.3657758e-11  1.8339168     -2.738082e-11   8.484          8.484          8.484          610.66353    
        15   0             -423.36         1.6334324e-06  1.7436162e-06  2.9027631e-07  2.8664046e-06  3.6747013e-11  1.8339168      5.8257065e-13  8.484          8.484          8.484          610.66353    
        16   0             -423.36         1.633475e-06   1.7437083e-06  2.9025097e-07  2.8664659e-06  4.4188415e-11  1.8339168     -5.2431358e-11  8.484          8.484          8.484          610.66353    
        17   0             -423.36         1.6334174e-06  1.7436209e-06  2.9024281e-07  2.8663884e-06  1.8484041e-11  1.8339168     -4.6896937e-11  8.484          8.484          8.484          610.66353    
Loop time of 0.0203615 on 1 procs for 15 steps with 64 atoms

99.8% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
      -423.35999995218  -423.360000012384  -423.360000012385
  Force two-norm initial, final = 0.0016542844 2.3533914e-11
  Force max component initial, final = 0.00026293808 4.051065e-12
  Final line search alpha, max atom move = 1 4.051065e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020224   | 0.020224   | 0.020224   |   0.0 | 99.33
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.5795e-05 | 4.5795e-05 | 4.5795e-05 |   0.0 |  0.22
Output  | 5.4543e-05 | 5.4543e-05 | 5.4543e-05 |   0.0 |  0.27
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.691e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1.74362089631511e-06
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 2.90242812757897e-07
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 2.86638841407163e-06
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 1.84840414982645e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.83391682673221
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -4.6896936991514e-11

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 0.000174424063700499
variable C2neg equal ${d2}
variable C2neg equal 2.90844025664422e-05
variable C3neg equal ${d3}
variable C3neg equal 0.000286715740732416
variable C4neg equal ${d4}
variable C4neg equal -4.6896936991514e-09
variable C5neg equal ${d5}
variable C5neg equal 183.39168268161
variable C6neg equal ${d6}
variable C6neg equal 6.27552639341029e-09

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*8.48400003529816
variable deltaxy equal ${up}*xy
variable deltaxy equal 1e-06*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1e-06*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
change_box all xz delta ${delta} remap units box
change_box all xz delta 8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 8.484e-06 0)
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         0.00043564603  0.00042066768  0.00036353678  0.00052273363 -1.0401704e-05 -1.8339031      1.8556467e-05  8.484          8.484          8.484          610.66353    
         3   0             -423.36         2.8453314e-05  2.6817794e-05  2.6822848e-05  3.1719299e-05 -8.9631418e-07 -1.8339175      8.1257828e-08  8.484          8.484          8.484          610.66353    
         4   0             -423.36         5.3774091e-06  5.6068182e-06  3.7066369e-06  6.8187723e-06 -3.0970327e-07 -1.8339169     -3.1191065e-07  8.484          8.484          8.484          610.66353    
         5   0             -423.36         2.2882837e-06  2.4743995e-06  8.8974151e-07  3.5007101e-06 -5.6379919e-08 -1.8339169     -4.1966933e-08  8.484          8.484          8.484          610.66353    
         6   0             -423.36         1.8371257e-06  1.9942582e-06  4.6061735e-07  3.0565015e-06 -2.3061715e-08 -1.8339168     -2.5648838e-08  8.484          8.484          8.484          610.66353    
         7   0             -423.36         1.6955837e-06  1.8144774e-06  3.4498785e-07  2.9272857e-06 -4.7288453e-09 -1.8339168     -6.2169026e-09  8.484          8.484          8.484          610.66353    
         8   0             -423.36         1.6438063e-06  1.7543827e-06  3.0035624e-07  2.87668e-06   -9.1011405e-11 -1.8339168     -3.8449663e-11  8.484          8.484          8.484          610.66353    
         9   0             -423.36         1.6347699e-06  1.7445947e-06  2.9177905e-07  2.8679359e-06 -5.5680278e-11 -1.8339168     -2.3011541e-11  8.484          8.484          8.484          610.66353    
        10   0             -423.36         1.6334287e-06  1.7435417e-06  2.9036981e-07  2.8663747e-06  4.2793799e-11 -1.8339168      4.6896937e-11  8.484          8.484          8.484          610.66353    
        11   0             -423.36         1.633308e-06   1.7435441e-06  2.901397e-07   2.8662401e-06  2.3416297e-11 -1.8339168      6.5539198e-11  8.484          8.484          8.484          610.66353    
        12   0             -423.36         1.6334236e-06  1.7435542e-06  2.9027718e-07  2.8664394e-06 -4.7089409e-11 -1.8339168     -5.8839635e-11  8.484          8.484          8.484          610.66353    
        13   0             -423.36         1.6334224e-06  1.7435578e-06  2.9032496e-07  2.8663845e-06 -3.4156846e-12 -1.8339168      9.3211303e-12  8.484          8.484          8.484          610.66353    
        14   0             -423.36         1.633398e-06   1.7435072e-06  2.9026961e-07  2.8664171e-06  1.2331782e-11 -1.8339168      8.9424594e-11  8.484          8.484          8.484          610.66353    
        15   0             -423.36         1.6333856e-06  1.7434827e-06  2.9022796e-07  2.8664462e-06  1.4730072e-11 -1.8339168     -1.1651413e-12  8.484          8.484          8.484          610.66353    
        16   0             -423.36         1.6333716e-06  1.7434891e-06  2.9021223e-07  2.8664133e-06 -4.4047459e-11 -1.8339168     -1.4855551e-11  8.484          8.484          8.484          610.66353    
        17   0             -423.36         1.6333676e-06  1.7435346e-06  2.9021281e-07  2.8663554e-06  3.7619574e-11 -1.8339168      2.3011541e-11  8.484          8.484          8.484          610.66353    
Loop time of 0.0203422 on 1 procs for 15 steps with 64 atoms

99.9% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
      -423.35999995218  -423.360000012384  -423.360000012385
  Force two-norm initial, final = 0.0016542844 2.3538659e-11
  Force max component initial, final = 0.0002629382 4.0115901e-12
  Final line search alpha, max atom move = 1 4.0115901e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020211   | 0.020211   | 0.020211   |   0.0 | 99.36
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.6334e-05 | 4.6334e-05 | 4.6334e-05 |   0.0 |  0.23
Output  | 4.7667e-05 | 4.7667e-05 | 4.7667e-05 |   0.0 |  0.23
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.679e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -423.360000012385
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1.63336757237025e-06
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1.74353455355365e-06
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 2.90212810369635e-07
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 2.86635535318748e-06
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 3.76195736543008e-11
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -1.83391682660977
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 2.3011540511364e-11

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -0.000174415429424353
variable C2pos equal ${d2}
variable C2pos equal -2.9081402327616e-05
variable C3pos equal ${d3}
variable C3pos equal -0.000286712434644001
variable C4pos equal ${d4}
variable C4pos equal -2.3011540511364e-09
variable C5pos equal ${d5}
variable C5pos equal 183.391682652588
variable C6pos equal ${d6}
variable C6pos equal -8.18907960901392e-09

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C15 equal 0.5*(${C1neg}+${C1pos})
variable C15 equal 0.5*(0.000174424063700499+${C1pos})
variable C15 equal 0.5*(0.000174424063700499+-0.000174415429424353)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C25 equal 0.5*(${C2neg}+${C2pos})
variable C25 equal 0.5*(2.90844025664422e-05+${C2pos})
variable C25 equal 0.5*(2.90844025664422e-05+-2.9081402327616e-05)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C35 equal 0.5*(${C3neg}+${C3pos})
variable C35 equal 0.5*(0.000286715740732416+${C3pos})
variable C35 equal 0.5*(0.000286715740732416+-0.000286712434644001)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C45 equal 0.5*(${C4neg}+${C4pos})
variable C45 equal 0.5*(-4.6896936991514e-09+${C4pos})
variable C45 equal 0.5*(-4.6896936991514e-09+-2.3011540511364e-09)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C55 equal 0.5*(${C5neg}+${C5pos})
variable C55 equal 0.5*(183.39168268161+${C5pos})
variable C55 equal 0.5*(183.39168268161+183.391682652588)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C65 equal 0.5*(${C6neg}+${C6pos})
variable C65 equal 0.5*(6.27552639341029e-09+${C6pos})
variable C65 equal 0.5*(6.27552639341029e-09+-8.18907960901392e-09)

# Delete dir to make sure it is not reused

variable dir delete

# uxy Perturbation

variable dir equal 6
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"
variable len0 equal ${ly0}
variable len0 equal 8.48400003529816

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1e-06*${len0}
variable delta equal -1e-06*8.48400003529816
variable deltaxy equal -${up}*xy
variable deltaxy equal -1e-06*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1e-06*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"
change_box all xy delta ${delta} remap units box
change_box all xy delta -8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (-8.484e-06 0 0)

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         0.00043564599  0.00042066775  0.0003661126   0.00052015763  1.8339064      1.3689986e-05  1.8556512e-05  8.484          8.484          8.484          610.66353    
         3   0             -423.36         2.8453387e-05  2.6817973e-05  2.9399043e-05  2.9143146e-05  1.8339159     -6.5008084e-07  8.130152e-08   8.484          8.484          8.484          610.66353    
         4   0             -423.36         5.3774101e-06  5.6069059e-06  6.282549e-06   4.2427754e-06  1.8339165     -9.6583574e-08 -3.1198144e-07  8.484          8.484          8.484          610.66353    
         5   0             -423.36         2.2882986e-06  2.4745448e-06  3.4656962e-06  9.2465467e-07  1.8339168     -3.7442914e-08 -4.2008004e-08  8.484          8.484          8.484          610.66353    
         6   0             -423.36         1.8372292e-06  1.9943974e-06  3.0369151e-06  4.8037494e-07  1.8339168      1.2633253e-09 -2.5472319e-08  8.484          8.484          8.484          610.66353    
         7   0             -423.36         1.6954002e-06  1.8144177e-06  2.9208904e-06  3.5089249e-07  1.8339168     -7.7209169e-10 -6.2940933e-09  8.484          8.484          8.484          610.66353    
         8   0             -423.36         1.6439225e-06  1.754499e-06   2.8765984e-06  3.006701e-07   1.8339168     -1.5816578e-09 -2.679825e-11   8.484          8.484          8.484          610.66353    
         9   0             -423.36         1.6347564e-06  1.7446192e-06  2.8678316e-06  2.9181838e-07  1.8339168     -2.3209595e-10 -6.728691e-11   8.484          8.484          8.484          610.66353    
        10   0             -423.36         1.6335109e-06  1.7436144e-06  2.8665543e-06  2.9036413e-07  1.8339168     -2.4918974e-11 -3.9906089e-11  8.484          8.484          8.484          610.66353    
        11   0             -423.36         1.6333743e-06  1.7434871e-06  2.8663533e-06  2.9028257e-07  1.8339168     -1.1913061e-10  1.5438122e-11  8.484          8.484          8.484          610.66353    
        12   0             -423.36         1.6334082e-06  1.7435374e-06  2.866466e-06   2.9022126e-07  1.8339168      5.3702167e-11  9.9328295e-11  8.484          8.484          8.484          610.66353    
        13   0             -423.36         1.6334028e-06  1.7434967e-06  2.8663935e-06  2.9031811e-07  1.8339168     -2.4485065e-11  5.8257065e-11  8.484          8.484          8.484          610.66353    
        14   0             -423.36         1.6334055e-06  1.7435187e-06  2.8663321e-06  2.9036559e-07  1.8339168     -6.5683014e-11  4.922722e-11   8.484          8.484          8.484          610.66353    
        15   0             -423.36         1.6333856e-06  1.7435251e-06  2.8663999e-06  2.9023174e-07  1.8339168     -2.9856719e-11  6.4374056e-11  8.484          8.484          8.484          610.66353    
        16   0             -423.36         1.6333911e-06  1.7435018e-06  2.8664561e-06  2.9021543e-07  1.8339168      2.9230645e-11 -2.0389973e-11  8.484          8.484          8.484          610.66353    
        17   0             -423.36         1.6334161e-06  1.7435193e-06  2.8664762e-06  2.9025286e-07  1.8339168      2.0949189e-11 -6.4374056e-11  8.484          8.484          8.484          610.66353    
Loop time of 0.0204356 on 1 procs for 15 steps with 64 atoms

99.8% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
     -423.359999952181  -423.360000012384  -423.360000012384
  Force two-norm initial, final = 0.0016542843 2.3542673e-11
  Force max component initial, final = 0.00026293812 4.0181192e-12
  Final line search alpha, max atom move = 1 4.0181192e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020293   | 0.020293   | 0.020293   |   0.0 | 99.30
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.5876e-05 | 4.5876e-05 | 4.5876e-05 |   0.0 |  0.22
Output  | 5.9334e-05 | 5.9334e-05 | 5.9334e-05 |   0.0 |  0.29
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.721e-05  |            |       |  0.18

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1.74351931667587e-06
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 2.8664762365965e-06
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 2.90252862101538e-07
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 1.83391682676709
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 2.09491891947518e-11
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -6.43740563672335e-11

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 0.000174413905736575
variable C2neg equal ${d2}
variable C2neg equal 0.000286707744950303
variable C3neg equal ${d3}
variable C3neg equal 2.9102185535407e-05
variable C4neg equal ${d4}
variable C4neg equal -6.43740563672335e-09
variable C5neg equal ${d5}
variable C5neg equal 1.04843508847523e-08
variable C6neg equal ${d6}
variable C6neg equal 183.391682681136

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
Reading restart file ...
  restart file = 23 Jun 2022, LAMMPS = 23 Jun 2022
  restoring atom style atomic from restart
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  pair style meam stores no restart info
  64 atoms
  read_restart CPU = 0.000 seconds
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style	meam
pair_coeff * * library.meam Ti N C TiN.meam Ti N
Reading MEAM library file library.meam with DATE: 2015-02-12

# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		1
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1e-06*${len0}
variable delta equal 1e-06*8.48400003529816
variable deltaxy equal ${up}*xy
variable deltaxy equal 1e-06*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1e-06*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1e-06*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"
change_box all xy delta ${delta} remap units box
change_box all xy delta 8.48400003529816e-06 remap units box
Changing box ...
  triclinic box = (-4.242 -4.242 -4.242) to (4.242 4.242 4.242) with tilt (8.484e-06 0 0)

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 100 ${maxeval}
minimize 0 1e-10 100 1000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 5.6
  ghost atom cutoff = 5.6
  2 neighbor lists, perpetual/occasional/extra = 2 0 0
  (1) pair meam, perpetual
      attributes: full, newton on
      pair build: full/nsq
      stencil: none
      bin: none
  (2) pair meam, perpetual, half/full from (1)
      attributes: half, newton on
      pair build: halffull/newton
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 9.908 | 9.908 | 9.908 Mbytes
   Step          Temp          PotEng         Press           Pxx            Pyy            Pzz            Pxy            Pxz            Pyz             Lx             Ly             Lz           Volume    
         2   0             -423.36         0.00043564601  0.00042066782  0.00036611258  0.00052015763 -1.8339272      1.3690183e-05  1.8556361e-05  8.484          8.484          8.484          610.66353    
         3   0             -423.36         2.8453375e-05  2.6817893e-05  2.9399044e-05  2.9143187e-05 -1.8339177     -6.5007633e-07  8.1365603e-08  8.484          8.484          8.484          610.66353    
         4   0             -423.36         5.3775183e-06  5.6071015e-06  6.2826035e-06  4.2428499e-06 -1.8339171     -9.6571701e-08 -3.1194561e-07  8.484          8.484          8.484          610.66353    
         5   0             -423.36         2.2884212e-06  2.4745463e-06  3.4660346e-06  9.2468249e-07 -1.8339169     -3.7428784e-08 -4.1997518e-08  8.484          8.484          8.484          610.66353    
         6   0             -423.36         1.8372169e-06  1.9944369e-06  3.0367439e-06  4.804699e-07  -1.8339168      1.4120143e-09 -2.558592e-08   8.484          8.484          8.484          610.66353    
         7   0             -423.36         1.6954921e-06  1.8144158e-06  2.9210115e-06  3.5104892e-07 -1.8339168     -8.1651515e-10 -6.2364188e-09  8.484          8.484          8.484          610.66353    
         8   0             -423.36         1.6438709e-06  1.7544336e-06  2.8765055e-06  3.0067374e-07 -1.8339168     -1.6303546e-09 -3.0293674e-11  8.484          8.484          8.484          610.66353    
         9   0             -423.36         1.6347801e-06  1.7447818e-06  2.86781e-06    2.9174832e-07 -1.8339168     -2.5001667e-10 -8.6803026e-11  8.484          8.484          8.484          610.66353    
        10   0             -423.36         1.6335599e-06  1.7437071e-06  2.8665677e-06  2.9040491e-07 -1.8339168     -5.9104226e-11  1.5729407e-11  8.484          8.484          8.484          610.66353    
        11   0             -423.36         1.6334157e-06  1.7435353e-06  2.8664063e-06  2.9030544e-07 -1.8339168     -2.6924716e-11 -5.8257065e-13  8.484          8.484          8.484          610.66353    
        12   0             -423.36         1.6333575e-06  1.743606e-06   2.8662767e-06  2.9018994e-07 -1.8339168      2.1712697e-11 -5.2140073e-11  8.484          8.484          8.484          610.66353    
        13   0             -423.36         1.633471e-06   1.7437178e-06  2.8663988e-06  2.9029655e-07 -1.8339168     -1.5388612e-11 -3.4371668e-11  8.484          8.484          8.484          610.66353    
        14   0             -423.36         1.633424e-06   1.7436456e-06  2.8663475e-06  2.9027893e-07 -1.8339168      1.4490937e-11  7.7481896e-11  8.484          8.484          8.484          610.66353    
        15   0             -423.36         1.6334611e-06  1.743666e-06   2.8664142e-06  2.9030325e-07 -1.8339168     -3.6255757e-11 -8.4472744e-12  8.484          8.484          8.484          610.66353    
        16   0             -423.36         1.6333845e-06  1.7435874e-06  2.8663583e-06  2.90208e-07   -1.8339168      4.3174822e-11  3.1458815e-11  8.484          8.484          8.484          610.66353    
        17   0             -423.36         1.6334559e-06  1.7436357e-06  2.8664384e-06  2.9029364e-07 -1.8339168      4.7313891e-12  2.6215679e-12  8.484          8.484          8.484          610.66353    
Loop time of 0.0202729 on 1 procs for 15 steps with 64 atoms

99.8% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
      -423.35999995218  -423.360000012385  -423.360000012385
  Force two-norm initial, final = 0.0016542844 2.353908e-11
  Force max component initial, final = 0.00026293817 4.0576709e-12
  Final line search alpha, max atom move = 1 4.0576709e-12
  Iterations, force evaluations = 15 30

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.020139   | 0.020139   | 0.020139   |   0.0 | 99.34
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 4.6378e-05 | 4.6378e-05 | 4.6378e-05 |   0.0 |  0.23
Output  | 4.9626e-05 | 4.9626e-05 | 4.9626e-05 |   0.0 |  0.24
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 3.763e-05  |            |       |  0.19

Nlocal:             64 ave          64 max          64 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:            665 ave         665 max         665 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:           2560 ave        2560 max        2560 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:         5120 ave        5120 max        5120 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 5120
Ave neighs/atom = 80
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -423.360000012385
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal 1.63345590670807e-06
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 1.74363570857294e-06
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 2.86643836950451e-06
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 2.90293642046748e-07
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -1.83391682676988
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 4.73138910847137e-12
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 2.62156790635792e-12

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -0.000174425544926282
variable C2pos equal ${d2}
variable C2pos equal -0.000286703958241104
variable C3pos equal ${d3}
variable C3pos equal -2.9106263529928e-05
variable C4pos equal ${d4}
variable C4pos equal -2.62156790635792e-10
variable C5pos equal ${d5}
variable C5pos equal -8.86257087612426e-09
variable C6pos equal ${d6}
variable C6pos equal 183.391682672561

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C16 equal 0.5*(${C1neg}+${C1pos})
variable C16 equal 0.5*(0.000174413905736575+${C1pos})
variable C16 equal 0.5*(0.000174413905736575+-0.000174425544926282)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C26 equal 0.5*(${C2neg}+${C2pos})
variable C26 equal 0.5*(0.000286707744950303+${C2pos})
variable C26 equal 0.5*(0.000286707744950303+-0.000286703958241104)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C36 equal 0.5*(${C3neg}+${C3pos})
variable C36 equal 0.5*(2.9102185535407e-05+${C3pos})
variable C36 equal 0.5*(2.9102185535407e-05+-2.9106263529928e-05)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C46 equal 0.5*(${C4neg}+${C4pos})
variable C46 equal 0.5*(-6.43740563672335e-09+${C4pos})
variable C46 equal 0.5*(-6.43740563672335e-09+-2.62156790635792e-10)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C56 equal 0.5*(${C5neg}+${C5pos})
variable C56 equal 0.5*(1.04843508847523e-08+${C5pos})
variable C56 equal 0.5*(1.04843508847523e-08+-8.86257087612426e-09)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C66 equal 0.5*(${C6neg}+${C6pos})
variable C66 equal 0.5*(183.391682681136+${C6pos})
variable C66 equal 0.5*(183.391682681136+183.391682672561)

# Delete dir to make sure it is not reused

variable dir delete

# Output final values

variable C11all equal ${C11}
variable C11all equal 659.371460529102
variable C22all equal ${C22}
variable C22all equal 659.371460514029
variable C33all equal ${C33}
variable C33all equal 659.371460526168

variable C12all equal 0.5*(${C12}+${C21})
variable C12all equal 0.5*(150.364591793188+${C21})
variable C12all equal 0.5*(150.364591793188+150.364591801241)
variable C13all equal 0.5*(${C13}+${C31})
variable C13all equal 0.5*(150.364591795518+${C31})
variable C13all equal 0.5*(150.364591795518+150.364591810031)
variable C23all equal 0.5*(${C23}+${C32})
variable C23all equal 0.5*(150.364591797295+${C32})
variable C23all equal 0.5*(150.364591797295+150.364591793865)

variable C44all equal ${C44}
variable C44all equal 183.391682662286
variable C55all equal ${C55}
variable C55all equal 183.391682667099
variable C66all equal ${C66}
variable C66all equal 183.391682676848

variable C14all equal 0.5*(${C14}+${C41})
variable C14all equal 0.5*(-7.10736188065023e-09+${C41})
variable C14all equal 0.5*(-7.10736188065023e-09+-4.82077315766554e-09)
variable C15all equal 0.5*(${C15}+${C51})
variable C15all equal 0.5*(4.31713807300007e-09+${C51})
variable C15all equal 0.5*(4.31713807300007e-09+2.596036702957e-09)
variable C16all equal 0.5*(${C16}+${C61})
variable C16all equal 0.5*(-5.81959485350316e-09+${C61})
variable C16all equal 0.5*(-5.81959485350316e-09+2.13541529174015e-09)

variable C24all equal 0.5*(${C24}+${C42})
variable C24all equal 0.5*(-1.02969361654971e-08+${C42})
variable C24all equal 0.5*(-1.02969361654971e-08+-1.84966038786501e-09)
variable C25all equal 0.5*(${C25}+${C52})
variable C25all equal 0.5*(1.50011941309883e-09+${C52})
variable C25all equal 0.5*(1.50011941309883e-09+-2.37142340668424e-09)
variable C26all equal 0.5*(${C26}+${C62})
variable C26all equal 0.5*(1.89335459948605e-09+${C62})
variable C26all equal 0.5*(1.89335459948605e-09+-2.41277040213497e-09)

variable C34all equal 0.5*(${C34}+${C43})
variable C34all equal 0.5*(-3.02208522551424e-09+${C43})
variable C34all equal 0.5*(-3.02208522551424e-09+-1.96617882805937e-09)
variable C35all equal 0.5*(${C35}+${C53})
variable C35all equal 0.5*(1.65304420748479e-09+${C53})
variable C35all equal 0.5*(1.65304420748479e-09+7.5445259842489e-10)
variable C36all equal 0.5*(${C36}+${C63})
variable C36all equal 0.5*(-2.03899726049995e-09+${C63})
variable C36all equal 0.5*(-2.03899726049995e-09+4.04708903185071e-09)

variable C45all equal 0.5*(${C45}+${C54})
variable C45all equal 0.5*(-3.4954238751439e-09+${C54})
variable C45all equal 0.5*(-3.4954238751439e-09+-2.05035736640975e-09)
variable C46all equal 0.5*(${C46}+${C64})
variable C46all equal 0.5*(-3.34978121367957e-09+${C64})
variable C46all equal 0.5*(-3.34978121367957e-09+-1.77158042069217e-09)
variable C56all equal 0.5*(${C56}+${C65})
variable C56all equal 0.5*(8.10890004314019e-10+${C65})
variable C56all equal 0.5*(8.10890004314019e-10+-9.56776607801815e-10)

# Average moduli for cubic crystals

variable C11cubic equal (${C11all}+${C22all}+${C33all})/3.0
variable C11cubic equal (659.371460529102+${C22all}+${C33all})/3.0
variable C11cubic equal (659.371460529102+659.371460514029+${C33all})/3.0
variable C11cubic equal (659.371460529102+659.371460514029+659.371460526168)/3.0
variable C12cubic equal (${C12all}+${C13all}+${C23all})/3.0
variable C12cubic equal (150.364591797215+${C13all}+${C23all})/3.0
variable C12cubic equal (150.364591797215+150.364591802774+${C23all})/3.0
variable C12cubic equal (150.364591797215+150.364591802774+150.36459179558)/3.0
variable C44cubic equal (${C44all}+${C55all}+${C66all})/3.0
variable C44cubic equal (183.391682662286+${C55all}+${C66all})/3.0
variable C44cubic equal (183.391682662286+183.391682667099+${C66all})/3.0
variable C44cubic equal (183.391682662286+183.391682667099+183.391682676848)/3.0

variable bulkmodulus equal (${C11cubic}+2*${C12cubic})/3.0
variable bulkmodulus equal (659.3714605231+2*${C12cubic})/3.0
variable bulkmodulus equal (659.3714605231+2*150.364591798523)/3.0
variable shearmodulus1 equal ${C44cubic}
variable shearmodulus1 equal 183.391682668744
variable shearmodulus2 equal (${C11cubic}-${C12cubic})/2.0
variable shearmodulus2 equal (659.3714605231-${C12cubic})/2.0
variable shearmodulus2 equal (659.3714605231-150.364591798523)/2.0
variable poissonratio equal 1.0/(1.0+${C11cubic}/${C12cubic})
variable poissonratio equal 1.0/(1.0+659.3714605231/${C12cubic})
variable poissonratio equal 1.0/(1.0+659.3714605231/150.364591798523)

# For Stillinger-Weber silicon, the analytical results
# are known to be (E. R. Cowley, 1988):
#               C11 = 151.4 GPa
#               C12 = 76.4 GPa
#               C44 = 56.4 GPa

print "========================================="
=========================================
print "Components of the Elastic Constant Tensor"
Components of the Elastic Constant Tensor
print "========================================="
=========================================

print "Elastic Constant C11all = ${C11all} ${cunits}"
Elastic Constant C11all = 659.371460529102 GPa
print "Elastic Constant C22all = ${C22all} ${cunits}"
Elastic Constant C22all = 659.371460514029 GPa
print "Elastic Constant C33all = ${C33all} ${cunits}"
Elastic Constant C33all = 659.371460526168 GPa

print "Elastic Constant C12all = ${C12all} ${cunits}"
Elastic Constant C12all = 150.364591797215 GPa
print "Elastic Constant C13all = ${C13all} ${cunits}"
Elastic Constant C13all = 150.364591802774 GPa
print "Elastic Constant C23all = ${C23all} ${cunits}"
Elastic Constant C23all = 150.36459179558 GPa

print "Elastic Constant C44all = ${C44all} ${cunits}"
Elastic Constant C44all = 183.391682662286 GPa
print "Elastic Constant C55all = ${C55all} ${cunits}"
Elastic Constant C55all = 183.391682667099 GPa
print "Elastic Constant C66all = ${C66all} ${cunits}"
Elastic Constant C66all = 183.391682676848 GPa

print "Elastic Constant C14all = ${C14all} ${cunits}"
Elastic Constant C14all = -5.96406751915788e-09 GPa
print "Elastic Constant C15all = ${C15all} ${cunits}"
Elastic Constant C15all = 3.45658738797853e-09 GPa
print "Elastic Constant C16all = ${C16all} ${cunits}"
Elastic Constant C16all = -1.84208978088151e-09 GPa

print "Elastic Constant C24all = ${C24all} ${cunits}"
Elastic Constant C24all = -6.07329827668105e-09 GPa
print "Elastic Constant C25all = ${C25all} ${cunits}"
Elastic Constant C25all = -4.35651996792705e-10 GPa
print "Elastic Constant C26all = ${C26all} ${cunits}"
Elastic Constant C26all = -2.5970790132446e-10 GPa

print "Elastic Constant C34all = ${C34all} ${cunits}"
Elastic Constant C34all = -2.49413202678681e-09 GPa
print "Elastic Constant C35all = ${C35all} ${cunits}"
Elastic Constant C35all = 1.20374840295484e-09 GPa
print "Elastic Constant C36all = ${C36all} ${cunits}"
Elastic Constant C36all = 1.00404588567538e-09 GPa

print "Elastic Constant C45all = ${C45all} ${cunits}"
Elastic Constant C45all = -2.77289062077682e-09 GPa
print "Elastic Constant C46all = ${C46all} ${cunits}"
Elastic Constant C46all = -2.56068081718587e-09 GPa
print "Elastic Constant C56all = ${C56all} ${cunits}"
Elastic Constant C56all = -7.2943301743898e-11 GPa

print "========================================="
=========================================
print "Average properties for a cubic crystal"
Average properties for a cubic crystal
print "========================================="
=========================================

print "Bulk Modulus = ${bulkmodulus} ${cunits}"
Bulk Modulus = 320.033548040049 GPa
print "Shear Modulus 1 = ${shearmodulus1} ${cunits}"
Shear Modulus 1 = 183.391682668744 GPa
print "Shear Modulus 2 = ${shearmodulus2} ${cunits}"
Shear Modulus 2 = 254.503434362289 GPa
print "Poisson Ratio = ${poissonratio}"
Poisson Ratio = 0.185695809600434
Total wall time: 0:00:00
